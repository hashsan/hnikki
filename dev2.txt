＃全てのエディタは画像をドロップできるべきだ。
というのは、真理だと思う。
なぜなら、画像ほど、面倒で、時間のかかる、それはないから。
エディタにドロップ。
「はい、画像です！」
というのが理想で。
じゃあ、次に重要なのは、その画像どこ？
みたいな話で。
「アップロードも、しときました！」
https://i.pinimg.com/564x/87/55/cc/8755cc716f2eb512e6a129099e409039.jpg
というメイド的雰囲気を全てのエディタは持てよ。みたいな話ですね。
「（何踏んづけてるのか気になる）」
いや、話を進める。
アップロードした画像の行方。。。
エディタに貼り付けておいて下さい。
最終的には「アップロードしたURLを！」
基本はこの仕様だな。
ImugrのAPIとかまじ使いやすい。
その前に、画像が大きい場合には小さくしなければなりません。

＃検証した結果512pxなら文字も読める。
しかもデータ圧縮できると、なおよろしい。
ブラウザ必須で行うので、ブラウザーフィーとか使わんでも、楽なやつ。
いや、今は、プリコンパイル発達してるから、ジットハブとか、自動でウェブパックしてくれるから、なかなか素敵。
はい。この画像圧縮あたりは、コードを書かずにありモンで済ませましょう。
「compressor.jsがいいぞ！」
関数ひとつでラクラク。
少し古いのでインターフェイスがXHRっぽい書き方になってるので、ちょっとプロミスでラッピングするとさらにゼンナブルできる。
これな。
---
import "https://hashsan.github.io/compressorjs/dist/compressor.js"

function resize(file,width){return new Promise((sol,rej)=>{
  new Compressor(file, {
    quality: 0.6,
    maxWidth:width||512,
    success:d=>sol(d),
    error:d=>rej(d),
  })
})}
---
「５１２！」
https://i.pinimg.com/564x/a1/2b/d0/a12bd0642667f3f894bd693c10065523.jpg
---
resize(file,size).then(minfile=>{ /*doooone*/ })
---
「圧縮シタ画像送レ！」
どこに送るかが問題ですね。

＃最終的には画像を送るんだけど、圧縮まではした。いまここ。
サーバーにあげるの。というのが、たぶんそうだけど、まずは、ローカルストレージさんから。
ローカルストレージさんはブロッブとか保存できるけど、それよりもbase64でいけるよ。「ベースロクヨンってね、それ文字列だよ！」
https://i.pinimg.com/564x/3b/f4/a7/3bf4a7c5db534b679922cfb3d67d6904.jpg
「くっ、キットナップ」
３割り増すけど、画像も５００キロから５０キロにしたし、三割増しても、１００キロ以下だからね。５１２サイズは。
というので「ベースロクヨンはポッシブルだ！」と思われる。
ローカルストレージの場合は、データはbase64にする。
「data:...base64,」から始まる方のな。
ベースロクヨンといっても、チャンクデータのロクヨンとデータタグの付いたロクヨンがあるから注意。
見分け方はブラウザ上では簡単ですね。
---
<img src="data:..." alt="表示できる？">
---
とイメージタグに入れておけばよい。
しかし、このあたりは、ローカルストレージからサーバに変更した場合に、サーバーへはファイルデータで送るから不整合が起きる点注意。
さらには、当然ながら、アドレスも変わる。ファイル名はせめて同じにしよう。
---
{
 "xxxxyyyyy.jpg":"data:....",
 "zzzzooooo.jpg":"data:...."
}
---
名前はどうしようか。元の名前を残すのはよいような、悪いような。
それは何故かといえば。
「1.jpgとか、ありきたり過ぎてもろかぶりだわ！」
という意味ですね。漫画の連番ファイルとか。
まあ。
---
toBlob()
toBase64()
---
は実装する必要がある。しかも、みんな書いてるから質のよいコードを取ってこよう。
「コピペで！」
コピペ文化って悪くないよね。
選定者の能力が問われる。
https://i.pinimg.com/564x/ee/22/f7/ee22f7f8ab8559ae8d5cbacee2def5d2.jpg
「はい、ビックデータです！」
とりあえず、エディタに画像をドロップしたら、はいURLってエディタに書き込まれて、クリップボードコピーでもいいけど。
んで、とりあえずローカルストレージさんにベースロクヨンで保存される。
ベースロクヨンか。でも、ファイルのアップロードはファイル形式だからなあ。
というので、検証が必要かもしれない。
「ローカルストレージにブロップデータ流し込めるの？」
「文字列しかダメな気がするけど」
という検証を、サーバに画像を送る話の前にするべきですね。
＠dev3へ#dev3
